<tw-storydata name="001" startnode="1" creator="Twine" creator-version="2.2.1" ifid="9BA9A2D7-4798-4C8B-9E21-2454EDAB09A7" zoom="1" format="Harlowe" format-version="1.2.4" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Стартовый экран" tags="" position="394,232" size="100,100">(set: $romance to 0) 

Начало игры, знакомство с миром и персонажем. 
&quot;Вы детектив, вам дают такое-то задание, у вас такие-то полномочия&quot;

Стартовый загруз - здесь нам рассказывают, что на луне планеты замечена подозрительная транспортная активность.

Знакомство с джедаями
Перелёт на планету
[[Полетели-&gt;Начало расследования]]</tw-passagedata><tw-passagedata pid="2" name="Начало расследования" tags="" position="403,405" size="100,100">Описание планеты. 
Источник при начальном загрузе говорил про подозрительную транспортную активность на одной из лун.

[[Общение с Энакином 1]]
[[Общение с Оби-Ваном 1]]
[[Здание правительства]]
[[Луна планеты]]
[[Туристские аттракционы]]</tw-passagedata><tw-passagedata pid="3" name="Общение с Энакином 1" tags="" position="126,387" size="100,100">Отличная возможность поближе познакомиться с младшим из джедаев! А может быть, побольше разузнать о магистре Кеноби...

(link: &quot;Флиртовать с Энакином&quot;)[В ответ на попытки с ним заигрывать Энакин краснеет, бледнеет, говорит &quot;Я же...&quot;, спохватывается, нервно озирается и пафосно заявляет: &quot;Джедаям не положено вступать в подобные отношения!&quot; ]

(link: &quot;Расспрашивать о деле&quot;)[Когда вы спрашиваете, что ему известно о деле, Энакин рассказывает, что сюда уже отправляли агента Республики - под прикрытием, а не как вас. К сожалению, она погибла при невыясненных обстоятельствах. Последнее, что она успела передать - что отправляется на Искрящиеся Водопады, популярное место отдыха для туристов.]

(link: &quot;Расспрашивать про Оби-Вана&quot;)[На расспросы про своего учителя Энакин только глаза закатывает и неопределённо ухмыляется.]


[[Расследуем дальше-&gt;Начало расследования]]</tw-passagedata><tw-passagedata pid="4" name="Общение с Оби-Ваном 1" tags="" position="112,539" size="100,100">Поговорили
Получили инфу 2
[[Расследуем дальше-&gt;Начало расследования]]</tw-passagedata><tw-passagedata pid="5" name="Здание правительства" tags="" position="280,646" size="100,100">Обследуем кабинет
Обнаруживается, что часть членов правительства сотрудничает с сепаратистами, найдены обещания контрактов от Торговой Федерации и лучших условий кредитования от Банковского Клана
[[Общение с Энакином 3]]
[[Общение с Оби-Ваном 3]]
[[Луна планеты]]</tw-passagedata><tw-passagedata pid="6" name="Луна планеты" tags="" position="490,661" size="100,100">Изучаем, что тут как
[[Фабрика]]
[[Офис руководства]]
[[Вернуться на планету-&gt;Начало расследования]]
</tw-passagedata><tw-passagedata pid="7" name="Туристские аттракционы" tags="" position="637,397" size="100,100">Развлекаемся и общаемся

[[Общение с Энакином 2]]
[[Общение с Оби-Ваном 2]]</tw-passagedata><tw-passagedata pid="8" name="Фабрика" tags="" position="483,872" size="100,100">Атака на сектор предотвращена!
[[Исследуем луну дальше-&gt;Луна планеты]]
[[Улетаем отсюда!]]</tw-passagedata><tw-passagedata pid="9" name="Офис руководства" tags="" position="663,868" size="100,100">Найдены следы причастности канцлера!
[[Исследуем луну дальше-&gt;Луна планеты]]
[[Улетаем отсюда!]]</tw-passagedata><tw-passagedata pid="10" name="Общение с Энакином 2" tags="" position="774,391" size="100,100">Поговорили
Получили инфу 3
[[На нас напали-&gt;Покушение 1]]</tw-passagedata><tw-passagedata pid="11" name="Общение с Оби-Ваном 2" tags="" position="743,542" size="100,100">Поговорили
Получили инфу 4
[[На нас напали-&gt;Покушение 1]]</tw-passagedata><tw-passagedata pid="12" name="Покушение 1" tags="" position="954,447" size="100,100">[[Выбор 1-&gt;Героиня погибает]]
[[Выбор 2-&gt;Энакин погибает]]
[[Выбор 3-&gt;Оби-Ван погибает]]
[[Выбор 4-&gt;Покушение 1 отбито]]
</tw-passagedata><tw-passagedata pid="13" name="Героиня погибает" tags="" position="893,266" size="100,100">Описание гибели
[[Финал 1 - смерть героини]]</tw-passagedata><tw-passagedata pid="14" name="Энакин погибает" tags="" position="1035,249" size="100,100">Описание гибели Энакина
[[Финал 2 - смерть Энакина]]</tw-passagedata><tw-passagedata pid="15" name="Оби-Ван погибает" tags="" position="1291,257" size="100,100">Описание гибели Оби-Вана
[[Смерть Оби-Вана]]</tw-passagedata><tw-passagedata pid="16" name="Покушение 1 отбито" tags="" position="828,710" size="100,100">Получили инфу 5 (о нападавших)
[[Расследуем дальше-&gt;Начало расследования]]</tw-passagedata><tw-passagedata pid="17" name="Финал 1 - смерть героини" tags="" position="613,261" size="100,100">&quot;Вы погибли. Но память о вас будет жить в архивах Республики&quot;
Клёвый код окончания.
[[Сыграть ещё раз?-&gt;Стартовый экран]]</tw-passagedata><tw-passagedata pid="18" name="Финал 2 - смерть Энакина" tags="" position="671,101" size="100,100">Энакин погиб, расследование провалилось, Оби-Ван и героиня возвращаются на Корусант, дальше у каждого своя дорога.
Клёвый код окончания.
[[Сыграть ещё раз?-&gt;Стартовый экран]]</tw-passagedata><tw-passagedata pid="19" name="Смерть Оби-Вана" tags="" position="1310,33" size="100,100">Энакин в гневе переходит на ТС
[[Пытаться его вразумить]]
[[Спасаться 1]]
[[Спасаться 2-&gt;Финал 4]]</tw-passagedata><tw-passagedata pid="20" name="Пытаться его вразумить" tags="" position="963,90" size="100,100">Всё безуспешно. Он вас убивает.
Описание гибели
[[Финал 1 - смерть героини]]</tw-passagedata><tw-passagedata pid="21" name="Спасаться 1" tags="" position="1156,124" size="100,100">Энакин взрывает эту проклятую планету. Вы гибнете.
Описание гибели
[[Финал 1 - смерть героини]]</tw-passagedata><tw-passagedata pid="22" name="Финал 4" tags="" position="474,0" size="100,100">Оби-Ван погиб, планета взорвалась, судьба Энакина неизвестна. Расследование провалилось.
Героиня возвращается на Корусант, боль-печаль.
Клёвый код окончания.
[[Сыграть ещё раз?-&gt;Стартовый экран]]</tw-passagedata><tw-passagedata pid="23" name="Общение с Энакином 3" tags="" position="44,674" size="100,100">Поговорили
Получили инфу
[[Расследуем дальше-&gt;Здание правительства]]</tw-passagedata><tw-passagedata pid="24" name="Общение с Оби-Ваном 3" tags="" position="58,859" size="100,100">Поговорили
Получили инфу
[[Расследуем дальше-&gt;Здание правительства]]</tw-passagedata><tw-passagedata pid="25" name="Улетаем отсюда!" tags="" position="593,1048" size="100,100">[[На нас напали-&gt;Покушение 2]]</tw-passagedata><tw-passagedata pid="26" name="Покушение 2" tags="" position="1103,761" size="100,100">[[Выбор 1-&gt;Героиня погибает]]
[[Выбор 2-&gt;Энакин погибает]]
[[Выбор 3-&gt;Оби-Ван погибает]]
[[Выбор 4-&gt;Покушение 2 отбито]]</tw-passagedata><tw-passagedata pid="27" name="Покушение 2 отбито" tags="" position="1312,650" size="100,100">[[Общение с Энакином 4]]
[[Общение с Оби-Ваном 4]]

[[Финал 5 - успех расследования]]</tw-passagedata><tw-passagedata pid="28" name="Финал 5 - успех расследования" tags="" position="1393,399" size="100,100">Если (найдена фабрика дроидов), то
     Атака на сектор предотвращена
иначе
     Сектор переходит под контроль сепаратистов

Если (найдены доказательства участия Палпатина), то
     Совет узнает, что Палпатин лично замешан в дейтельности сепаратистов
иначе
     Сюжет МС не изменен

Если (героиня начинает романс с Оби-Ваном) и (героиня жива) и (Эничка жив), то
     Оби-Ван обещает вернуться после CW
     Эничка рад за друга
иначе
     Оби-Ван с Эничкой просто желают удачи и прощаются
	 
Клёвый код окончания.
[[Сыграть ещё раз?-&gt;Стартовый экран]]	 </tw-passagedata><tw-passagedata pid="29" name="Общение с Энакином 4" tags="" position="1296,842" size="100,100">Поговорили
Получили инфу
[[Ура, победа-&gt;Покушение 2 отбито]]
</tw-passagedata><tw-passagedata pid="30" name="Общение с Оби-Ваном 4" tags="" position="1462,800" size="100,100">Поговорили
Получили инфу
[[Ура, победа-&gt;Покушение 2 отбито]]
</tw-passagedata></tw-storydata>

<tw-storydata name="001.1" startnode="1" creator="Twine" creator-version="2.2.1" ifid="9BA9A2D7-4798-4C8B-9E21-2454EDAB09A7" zoom="1" format="Harlowe" format-version="1.2.4" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">

</style><script role="script" id="twine-user-script" type="text/twine-javascript">

</script><tw-passagedata pid="1" name="Стартовый экран" tags="" position="391,233" size="100,100">Начало игры, знакомство с миром и персонажем. 
&quot;Вы детектив, вам дают такое-то задание, у вас такие-то полномочия&quot;

В последний момент аналитик вашего отдела скидывает вам на комм сообщение: на одной из лун планеты замечена подозрительная транспортная активность.

Знакомство с джедаями
Перелёт на планету

[[Полетели-&gt;Начало расследования]]

(set: $anakin_lives to 1)
(set: $obiwan_lives to 1) 
(set: $you_live to 1) 
(set: $inf_anakin to 0) 
(set: $inf_obiwan to 0) 
(set: $romance_obiwan to 0) 
(set: $inf_assasination_attempt to 0) 
(set: $inf_contacts_with_separatists to 0) 
(set: $inf_droid_factory to 0) 
(set: $inf_palpatine_connection to 0) 


</tw-passagedata><tw-passagedata pid="2" name="Начало расследования" tags="" position="402,405" size="100,100">Описание планеты. 
Источник при начальном загрузе говорил про подозрительную транспортную активность на одной из лун.
Вас очень дружелюбно встречают, размещают в лучшем отеле и предлагают за счёт принимающей стороны съездить на популярный курорт - Искрящиеся Водопады. Оби-Ван поначалу против, а Энакин ведёт себя странно: радостно соглашается поехать на водопады и пинает Оби-Вана под столом, иногда попадая вам по ноге. 

[[Поговорить с Энакином-&gt;Общение с Энакином 1]]
[[Поговорить с Оби-Ваном-&gt;Общение с Оби-Ваном 1]]
[[Отправиться осматривать здание правительства-&gt;Здание правительства]]
[[Лететь на Искрящиеся Водопады-&gt;Туристские аттракционы]]
(if: ($inf_assasination_attempt &gt; 0 and $inf_contacts_with_separatists &gt; 0))[Вы понимаете, что должны лететь на луну
[[Луна планеты]]]</tw-passagedata><tw-passagedata pid="3" name="Общение с Энакином 1" tags="" position="95,371" size="100,100">Отличная возможность поближе познакомиться с младшим из джедаев. А может быть, побольше разузнать о магистре Кеноби - ведь он такой симпатичный!

(link: &quot;Флиртовать с Энакином&quot;)[В ответ на попытки с ним заигрывать Энакин краснеет, бледнеет, говорит &quot;Я же...&quot;, спохватывается, нервно озирается и пафосно заявляет: &quot;Джедаям не положено вступать в подобные отношения!&quot; ]

(link: &quot;Расспрашивать о деле&quot;)[Когда вы спрашиваете, что ему известно о вашем задании, Энакин рассказывает, что сюда уже отправляли агента Республики - под прикрытием, а не как вас. К сожалению, она погибла при невыясненных обстоятельствах. Последнее, что она успела передать - что отправляется на Искрящиеся Водопады, популярное место отдыха для туристов. (set: $inf_anakin to $inf_anakin + 1)]

(link: &quot;Расспрашивать про Оби-Вана&quot;)[На расспросы про своего учителя Энакин только глаза закатывает и неопределённо ухмыляется.]

[[Расследуем дальше-&gt;Начало расследования]]</tw-passagedata><tw-passagedata pid="4" name="Общение с Оби-Ваном 1" tags="" position="104,518" size="100,100">Что-то Оби-Ван выглядит пасмурным. Может, с ним немного поболтать? Интересно, а как он насчёт небольшого флирта между коллегами? Исключительно ради лёгкой атмосферы в команде. Впрочем, можно и по делу его расспросить... Или узнать побольше про Энакина - что-нибудь, что он сам о себе не расскажет?

(link: &quot;Расспрашивать о деле&quot;)[Когда вы задаёте вопросы о расследовании, Оби-Ван поначалу отвечает уклончиво, но потом всё же делится с вами тем, что вам не сказали. Есть основания считать, что кто-то в правительстве сектора сотрудничает с сепаратистами, а корни заговора тянутся к высокопоставленным сенаторам в столице Республики. (set: $inf_obiwan to $inf_obiwan + 1)]

(link: &quot;Флиртовать с Оби-Ваном&quot;)[Кажется, Оби-Ван не против немного развеяться и провести время в хорошей компании. Взгляды из-под ресниц, улыбка... да это он с вами флиртует! Или нет? Не поймёшь их, этих джедаев. (set: $romance_obiwan to $romance_obiwan + 1)] 

(link: &quot;Разузнать про Энакина&quot;)[Оби-Ван охотно рассказывает разные смешные истории про своего ученика. Подумать только! А вы-то считали, что рыцари-джедаи не могут съесть целый торт и потом страдать. Или заблудиться в музее Республики!]

[[Расследуем дальше-&gt;Начало расследования]]</tw-passagedata><tw-passagedata pid="5" name="Здание правительства" tags="" position="280,645" size="100,100">Обследуем кабинет
Обнаруживается, что часть членов правительства сотрудничает с сепаратистами, найдены обещания контрактов от Торговой Федерации и лучших условий кредитования от Банковского Клана (set: $inf_contacts_with_separatists to 1) 
[[Общение с Энакином 3]]
[[Общение с Оби-Ваном 3]]
(if: $inf_assasination_attempt &gt; 0)[Вы понимаете, что должны лететь на луну
[[Луна планеты]]]
(else:)[Вы не знаете, что делать дальше]
[[Начало расследования]]</tw-passagedata><tw-passagedata pid="6" name="Луна планеты" tags="" position="490,661" size="100,100">Изучаем, что тут как
[[Фабрика]]
[[Офис руководства]]
[[Вернуться на планету-&gt;Начало расследования]]
</tw-passagedata><tw-passagedata pid="7" name="Туристские аттракционы" tags="" position="637,397" size="100,100">Развлекаемся и общаемся

[[Общение с Энакином 2]]
[[Общение с Оби-Ваном 2]]</tw-passagedata><tw-passagedata pid="8" name="Фабрика" tags="" position="483,872" size="100,100">Атака на сектор предотвращена! (set: $inf_droid_factory to 1) 
[[Исследуем луну дальше-&gt;Луна планеты]]
[[Улетаем отсюда!]]</tw-passagedata><tw-passagedata pid="9" name="Офис руководства" tags="" position="663,868" size="100,100">Найдены следы причастности канцлера! (set: $inf_palpatine_connection to 1) 
[[Исследуем луну дальше-&gt;Луна планеты]]
[[Улетаем отсюда!]]</tw-passagedata><tw-passagedata pid="10" name="Общение с Энакином 2" tags="" position="768,369" size="100,100">Поговорили
Получили инфу 3 (set: $inf_anakin to $inf_anakin + 1) 
[[На нас напали-&gt;Покушение 1]]</tw-passagedata><tw-passagedata pid="11" name="Общение с Оби-Ваном 2" tags="" position="743,542" size="100,100">Поговорили
Получили инфу 4 (set: $inf_obiwan to $inf_obiwan + 1) 
[[На нас напали-&gt;Покушение 1]]</tw-passagedata><tw-passagedata pid="12" name="Покушение 1" tags="" position="954,447" size="100,100">[[Выбор 1-&gt;Героиня погибает]]
[[Выбор 2-&gt;Энакин погибает]]
[[Выбор 3-&gt;Оби-Ван погибает]]
[[Выбор 4-&gt;Покушение 1 отбито]]
</tw-passagedata><tw-passagedata pid="13" name="Героиня погибает" tags="" position="893,266" size="100,100">Описание гибели
[[Финал 1 - смерть героини]]</tw-passagedata><tw-passagedata pid="14" name="Энакин погибает" tags="" position="1035,249" size="100,100">Описание гибели Энакина
[[Финал 2 - смерть Энакина]]</tw-passagedata><tw-passagedata pid="15" name="Оби-Ван погибает" tags="" position="1291,257" size="100,100">Описание гибели Оби-Вана
[[Смерть Оби-Вана]]</tw-passagedata><tw-passagedata pid="16" name="Покушение 1 отбито" tags="" position="828,710" size="100,100">Получили инфу 5 (о нападавших) (set: $inf_assasination_attempt to 1) 
[[Расследуем дальше-&gt;Начало расследования]]</tw-passagedata><tw-passagedata pid="17" name="Финал 1 - смерть героини" tags="" position="636,236" size="100,100">&quot;Вы погибли. Но память о вас будет жить в архивах Республики&quot;
Клёвый код окончания.
[[Сыграть ещё раз?-&gt;Стартовый экран]]</tw-passagedata><tw-passagedata pid="18" name="Финал 2 - смерть Энакина" tags="" position="671,101" size="100,100">Энакин погиб, расследование провалилось, Оби-Ван и героиня возвращаются на Корусант, дальше у каждого своя дорога.
Клёвый код окончания.
[[Сыграть ещё раз?-&gt;Стартовый экран]]</tw-passagedata><tw-passagedata pid="19" name="Смерть Оби-Вана" tags="" position="1310,33" size="100,100">Энакин в гневе переходит на ТС
[[Пытаться его вразумить]]
[[Спасаться 1]]
[[Спасаться 2-&gt;Финал 4]]</tw-passagedata><tw-passagedata pid="20" name="Пытаться его вразумить" tags="" position="963,90" size="100,100">Всё безуспешно. Энакин вас убивает.
Описание гибели
[[Финал 1 - смерть героини]]</tw-passagedata><tw-passagedata pid="21" name="Спасаться 1" tags="" position="1156,124" size="100,100">Энакин взрывает эту проклятую планету. Вы гибнете.
Описание гибели
[[Финал 1 - смерть героини]]</tw-passagedata><tw-passagedata pid="22" name="Финал 4" tags="" position="474,0" size="100,100">Оби-Ван погиб, планета взорвалась, судьба Энакина неизвестна. Расследование провалилось.
Героиня возвращается на Корусант, боль-печаль.
Клёвый код окончания.
[[Сыграть ещё раз?-&gt;Стартовый экран]]</tw-passagedata><tw-passagedata pid="23" name="Общение с Энакином 3" tags="" position="44,674" size="100,100">Поговорили
Получили инфу (set: $inf_anakin to $inf_anakin + 1) 
[[Расследуем дальше-&gt;Здание правительства]]</tw-passagedata><tw-passagedata pid="24" name="Общение с Оби-Ваном 3" tags="" position="58,859" size="100,100">Поговорили
Получили инфу (set: $inf_obiwan to $inf_obiwan + 1) 
[[Расследуем дальше-&gt;Здание правительства]]</tw-passagedata><tw-passagedata pid="25" name="Улетаем отсюда!" tags="" position="593,1048" size="100,100">[[На нас напали-&gt;Покушение 2]]</tw-passagedata><tw-passagedata pid="26" name="Покушение 2" tags="" position="1103,761" size="100,100">[[Выбор 1-&gt;Героиня погибает]]
[[Выбор 2-&gt;Энакин погибает]]
[[Выбор 3-&gt;Оби-Ван погибает]]
[[Выбор 4-&gt;Покушение 2 отбито]]</tw-passagedata><tw-passagedata pid="27" name="Покушение 2 отбито" tags="" position="1312,650" size="100,100">[[Общение с Энакином 4]]
[[Общение с Оби-Ваном 4]]

[[Финал 5 - успех расследования]]</tw-passagedata><tw-passagedata pid="28" name="Финал 5 - успех расследования" tags="" position="1393,399" size="100,100"> (if: $inf_droid_factory &gt; 0)[Атака на сектор предотвращена]
 (else:)[Сектор переходит под контроль сепаратистов]

 (if: $inf_palpatine_connection &gt; 0)[Совет узнает, что Палпатин лично замешан в дейтельности сепаратистов]
 (else:)[Вам не удалось найти, кто из сенаторов сотрудничал с сепаратистами]

 (if: ($inf_obiwan &gt; 3) or ($romance_obiwan &gt; 1))[Оби-Ван обещает вернуться после CW, Эничка рад за друга]
 (else:)[Оби-Ван желает удачи и прощается]
 
  (if: $inf_anakin &gt; 3)[Энакин говорит, насколько ты хороший друг]
 (else:)[Энакин желает удачи и прощается]
	 
Код окончания - успех.
[[Сыграть ещё раз?-&gt;Стартовый экран]]	 </tw-passagedata><tw-passagedata pid="29" name="Общение с Энакином 4" tags="" position="1296,842" size="100,100">Поговорили
Получили инфу
[[Ура, победа-&gt;Покушение 2 отбито]]
</tw-passagedata><tw-passagedata pid="30" name="Общение с Оби-Ваном 4" tags="" position="1462,800" size="100,100">Поговорили
Получили инфу
[[Ура, победа-&gt;Покушение 2 отбито]]
</tw-passagedata></tw-storydata>

<tw-storydata name="Dungeon World move structure" startnode="1" creator="Twine" creator-version="2.2.1" ifid="6BD199F7-19DD-4E9C-ABCF-44ECB06BB917" zoom="1" format="Harlowe" format-version="1.2.4" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">.the_button {
  width:  100px;
  display: inline;
  border: 1px solid black;
   background: silver;
   padding: 10px 20px;
   -webkit-border-radius: 9px;
   -moz-border-radius: 9px;
   border-radius: 9px;
   -webkit-box-shadow: rgba(0,0,0,1) 0 1px 0;
   -moz-box-shadow: rgba(0,0,0,1) 0 1px 0;
   box-shadow: rgba(0,0,0,1) 0 1px 0;
   color: white;
   font-size: 18px;
   font-family: Georgia, Serif;
   text-decoration: none;
   vertical-align: middle;  
}</style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Start" tags="" position="796.5,353" size="100,100">Игрок описывает действия своего персонажа.
&lt;i&gt;(&lt;b&gt;fiction first:&lt;/b&gt; даже если игрок при этом заявляет ход, все равно перепроверь, исходя из описания действий, а не заявленного хода)&lt;/i&gt;

Похоже на один из ходов, &lt;b&gt;доступных персонажу&lt;/b&gt;? (включая основные, особые, классовые и ходы кампании)
{&lt;div class = &quot;the_button&quot; &gt;[[Да|Logic01]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Logic02]]&lt;/div&gt;}</tw-passagedata><tw-passagedata pid="2" name="Logic01" tags="" position="844.5,707" size="100,100">Логика повествования, снаряжение персонажа, свойства монстров/предметов/мест соответствуют условиям хода?
{&lt;div class = &quot;the_button&quot;&gt;[[Да|Move01]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Logic03]]&lt;/div&gt;}</tw-passagedata><tw-passagedata pid="3" name="Logic02" tags="" position="538.5,400" size="100,100">Логика повествования, снаряжение персонажа, свойства монстров/предметов/мест вообще позволяют совершить это действие?
{&lt;div class = &quot;the_button&quot;&gt;[[Да|Danger01]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Final01]]&lt;/div&gt;}</tw-passagedata><tw-passagedata pid="4" name="Move01" tags="" position="992.5,488" size="100,100">Персонаж совершает подходящий ход. 

По условиям хода нужно бросать кубики?
{&lt;div class = &quot;the_button&quot;&gt;[[Да|Roll01]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Success01]]&lt;/div&gt;}</tw-passagedata><tw-passagedata pid="5" name="Logic03" tags="" position="641.5,810" size="100,100">Логика повествования, снаряжение персонажа, свойства монстров/предметов/мест вообще позволяют совершить это действие?
{&lt;div class = &quot;the_button&quot;&gt;[[Да|Success01]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Final01]]&lt;/div&gt;}</tw-passagedata><tw-passagedata pid="6" name="Success01" tags="" position="219.5,707" size="100,100">Это автоматически успешное действие! 

Что дальше делают игроки?

&lt;div class = &quot;the_button&quot;&gt;[[Заявляют новое действие|Start]]&lt;/div&gt;

&lt;div class = &quot;the_button&quot;&gt;[[Смотрят в ожидании|SoftMove01]]&lt;/div&gt; (возникла пауза, игроки не знают, что делать дальше)
</tw-passagedata><tw-passagedata pid="7" name="Final01" tags="" position="517.5,642" size="100,100">Мастер объясняет, почему действие невозможно. Игрок должен изменить заявку.

(display: &quot;ReturnToStart&quot;)
&lt;!--[[Start]]--&gt;
</tw-passagedata><tw-passagedata pid="8" name="SoftMove01" tags="" position="513.5,994" size="100,100">Мастер делает &lt;b&gt;мягкий&lt;/b&gt; ход (опасность отсрочена или обратима).

Игроки всё ещё смотрят в ожидании (возникла пауза, игроки не знают, что делать дальше?
{&lt;div class = &quot;the_button&quot;&gt;[[Да|Hard01]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Start]]&lt;/div&gt;}</tw-passagedata><tw-passagedata pid="9" name="Danger01" tags="" position="613.5,272" size="100,100">Персонаж при этом находится в опасности?
&lt;i&gt;(Мастер может прервать действия персонажа, объявив о заранее неизвестной опасности. В этом случае игрок должен сделать новую заявку и ход &quot;Спастись от опасности&quot;)&lt;/i&gt;
{&lt;div class = &quot;the_button&quot;&gt;[[Да|Danger02]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Success01]]&lt;/div&gt;}</tw-passagedata><tw-passagedata pid="10" name="Danger02" tags="" position="567.5,114" size="100,100">Персонаж совершает подходящий ход. В данном случае это ход &quot;Спастись от опасности&quot;.
По условиям хода нужно бросать кубики?
{&lt;div class = &quot;the_button&quot;&gt;[[Да|Roll01]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Success01]]&lt;/div&gt;}</tw-passagedata><tw-passagedata pid="11" name="Roll01" tags="" position="1166.5,613" size="100,100">Какой выпал результат?
&lt;div class = &quot;the_button&quot;&gt;[[7 и больше|Success02]]&lt;/div&gt; &amp;nbsp; &lt;div class = &quot;the_button&quot;&gt;[[6 и меньше|Fail01]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="12" name="Success02" tags="" position="1032.5,702" size="100,100">Действуй &lt;b&gt;строго&lt;/b&gt; в соответствии с описанием хода. 
(Мастер в данном случае не делает ходов из своего списка.)

(display: &quot;ReturnToStart&quot;)
&lt;!--[[Start]]--&gt;</tw-passagedata><tw-passagedata pid="13" name="Fail01" tags="" position="1215.5,824" size="100,100">Действие персонажа может быть успешным, частично успешным или проваленным на усмотрение мастера. В любом случае, мастер делает &lt;b&gt;один&lt;/b&gt; ход из списка своих ходов.

Предыдущий ход мастера был мягким?
{&lt;div class = &quot;the_button&quot;&gt;[[Да|Hard02]]&lt;/div&gt; &lt;div class = &quot;the_button&quot;&gt;[[Нет|Move03]]&lt;/div&gt;}
</tw-passagedata><tw-passagedata pid="14" name="Hard01" tags="" position="792.5,850" size="100,100">Это &quot;золотая возможность&quot;, мастер делает &lt;b&gt;жесткий&lt;/b&gt; ход (опасность возникает немедленно или она необратима).

(display: &quot;ReturnToStart&quot;)
&lt;!--[[Start]]--&gt;</tw-passagedata><tw-passagedata pid="15" name="Hard02" tags="" position="987.5,861" size="100,100">Мастер делает &lt;b&gt;жесткий&lt;/b&gt; ход (опасность возникает немедленно или она необратима).

(display: &quot;ReturnToStart&quot;)
&lt;!--[[Start]]--&gt;</tw-passagedata><tw-passagedata pid="16" name="Move03" tags="" position="1140.5,1037" size="100,100">Мастер выбирает, сделать [[мягкий|SoftMove01]] ход или [[жёсткий|Hard02]].</tw-passagedata><tw-passagedata pid="17" name="ReturnToStart" tags="" position="754.5,1069" size="100,100">&lt;div class = &quot;the_button&quot;&gt;[[Проанализируем ещё один ход?|Start]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="18" name="Header" tags="header" position="812.5,93" size="100,100">&quot;Четкая схема хода Dungeon World&quot;
&lt;span style=&quot;font-size: 50%&quot;&gt;made by &lt;b&gt;switcher&lt;/b&gt;, Twine code by &lt;b&gt;Finitumus&lt;/b&gt;&lt;/span&gt;
&lt;br/&gt;
</tw-passagedata></tw-storydata>

<tw-storydata name="Engine test" startnode="5" creator="Twine" creator-version="2.2.1" ifid="40E4BAD6-549F-4EF9-8FFF-33A8028A6D9F" zoom="1" format="Harlowe" format-version="2.1.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">tw-story {
background-color: silver;
}

.speaker {
font-family: sans-serif;
padding: .3em 80px .3em .3em ;
margin: .3em;
max-width: 30em;
min-height: 3em;
background-size: 3em 3em;
background-repeat: no-repeat;
border-radius: 8px;
}
.main_pic {
  width: 640px;
  height: 480px;  
  margin: 5px;  
box-shadow: 0 0 4px 2px black;  
border: 2px solid white;
border-radius: 10px;   
}

.dialogue {
max-width: 32em;  
background-color: midnightblue;  
border: 4px solid CornflowerBlue;
border-radius: 10px;  
box-shadow: inset 0 0 4px black;   
}

.mina {
background-color: black;
color: white;
background-position:  100% 0%;
background-image: url(https://i.imgur.com/teU7G7k.png);
border: 2px solid CornflowerBlue;
  border-radius: 10px;  
}

.izuku {
background-color: azure;
background-position:  100% 0%;  
background-image: url(https://i.imgur.com/AjbXF32.png);
border: 2px solid CornflowerBlue;
  border-radius: 10px;  
}
/*
    Reposition the Sidebar 'footer' tagged passage.
*/
tw-include[title="Sidebar"] {
    position: fixed;
    top: 0;
    left: 0;
    width: 20%;                        /* padding-right of the tw-story element. */
    max-height: 100%;
    margin-top: calc(5% + 171px);    /* padding-top of the tw-story element plus computed height of the tw-sidebar element. */
    padding: 0.5em;
    background-color: transparent;
    text-align: right;
}</style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Разговор с Миной" tags="" position="260.5,77" size="100,100">&lt;img class=&quot;main_pic&quot; width=800px height=600px src=&quot;https://i.imgur.com/4itfFFy.jpg&quot; alt=&#39;Main picture&#39; /&gt;
{(set: $dialog_mina1 to (array: &quot;&lt;div class=\&quot;speaker mina\&quot;&gt;
Привет! Я - Мина Ашидо, СУСШ Химикесса! Рада знакомству!
&lt;/div&gt;&quot;))
(set: $dialog to $dialog_mina1)
(set: $dialog_len to $dialog&#39;s length)
(set: $away to (array: &quot;вернуться к другим ученикам&quot;, &quot;Диалоговые опции 1 - Мина, Цую, Тенья&quot;))
(set: $away to (array: &quot;static&quot;, &quot;Здесь стоит Мина Ашидо, СУСШ Химикесса, с которой ты недавно познакомился.&quot;))

[(display: &quot;Dialog&quot;)]&lt;dialog|}

(unless: $inventory contains &quot;An Unsigned Note&quot;)[(link: &quot;There is a note here. Pick it up.&quot;)[(set: $inventory to $inventory + (a:&quot;An Unsigned Note&quot;))You have a note.]]

&lt;!-- [[Диалоговые опции 1 - Мина, Цую, Тенья]] --&gt;
</tw-passagedata><tw-passagedata pid="2" name="Inventory" tags="" position="392.5,357" size="100,100">Inventory: (link: &quot;Show&quot;)[
(if: $inventory&#39;s length &gt; 0)[(for: each _item, ...$inventory)[_item
  ]](else:)[ No items]]</tw-passagedata><tw-passagedata pid="3" name="Story Menu" tags="" position="398.5,110" size="100,100">[[Inventory]]
[[Clues]]</tw-passagedata><tw-passagedata pid="4" name="3D Printer Room" tags="" position="230.5,274" size="100,100">(set: $money to 5)
В этой комнате стоит 3Д-принтер, настроенный на случайную выдачу мелких сувениров.
{(if: $money &gt; 0) [(display: &quot;Do Printing&quot;)](else:)[(display: &quot;No Money&quot;)]}
|gotitem&gt;[]</tw-passagedata><tw-passagedata pid="5" name="Start screen" tags="" position="96.5,87" size="100,100">[[Поговорить с Миной|Разговор с Миной]]</tw-passagedata><tw-passagedata pid="6" name="Header" tags="header" position="806.5,0" size="100,100">&lt;img src=&quot;https://i.imgur.com/BjNB7oZ.png&quot; width=100px/&gt;
&lt;hr&gt;</tw-passagedata><tw-passagedata pid="7" name="Footer" tags="footer" position="716.5,113" size="100,100">&lt;hr&gt;&lt;img src=&quot;https://i.imgur.com/BjNB7oZ.png&quot; width=100px/&gt;</tw-passagedata><tw-passagedata pid="8" name="Init" tags="startup" position="533.5,430" size="100,100">{(set: $inventory to (array:)) 
(set: $clues to (array:)) 
(set: $name to &quot;Hero&quot;, $location to &quot;School&quot;, $money to 0)
}
{(set: $printer_items to (array:))
(set: $item to (datamap: &quot;name&quot;, &quot;Ягоды Черники&quot;, &quot;description&quot;, &quot;Несколько ягод черники — совершенно обычных на вкус и вид.&quot;, &quot;class&quot;, &quot;blueberry&quot;))
(set: $printer_items to it + (a: $item))
(set: $item to (datamap: &quot;name&quot;, &quot;Макарони&quot;, &quot;description&quot;, &quot;Французские печенья с мятным вкусом.&quot;, &quot;class&quot;, &quot;macaroni&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Радужный Капкейк&quot;, &quot;description&quot;, &quot;Разноцветный капкейк. На вид он лучше, чем на вкус, хотя нельзя назвать вкус ужасным.&quot;, &quot;class&quot;, &quot;cupcake&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Вечный Террариум&quot;, &quot;description&quot;, &quot;Маленькая стеклянная баночка, внутри которой находится замкнутая экосистема.&quot;, &quot;class&quot;, &quot;terrarium&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Розовая Ведьминская Соль&quot;, &quot;description&quot;, &quot;«Для Любви, Желаний, Очищения и Выздоровления». Чтобы желание исполнилось, нужно бросить ее в огонь.&quot;, &quot;class&quot;, &quot;salt&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Мешочек с Рунами&quot;, &quot;description&quot;, &quot;Небольшой тканевый мешочек с рунами для гадания. Руны гладкие и блестящие.&quot;, &quot;class&quot;, &quot;runebag&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Плюшевый Шмель&quot;, &quot;description&quot;, &quot;Пушистый плюшевый шмель размером с вашу голову. Его приятно обнимать, если вы, конечно, не боитесь шмелей.&quot;, &quot;class&quot;, &quot;bumblebee&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Некрономикон&quot;, &quot;description&quot;, &quot;Книга с глазами. Внутри — тексты на непонятном языке и странные символы.&quot;, &quot;class&quot;, &quot;necronomicon&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Кружка с Кристаллами&quot;, &quot;description&quot;, &quot;Кружка с вылепленными кристаллами. Не очень удобно, зато стильно.&quot;, &quot;class&quot;, &quot;cupcrystal&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Цветочный Чайный Набор&quot;, &quot;description&quot;, &quot;Фарфоровые кружка и блюдце, украшенные цветами и листьями. Хорошо, пока вам не придется ее мыть.&quot;, &quot;class&quot;, &quot;flowerteaset&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Фигурка Кошки-Скелета&quot;, &quot;description&quot;, &quot;Небольшая, размером с ладонь, фигурка кошки, расписанная мексиканскими мотивами.&quot;, &quot;class&quot;, &quot;catfigurine&quot;))
(set: $printer_items to it + (a:$item))
(set: $item to (datamap: &quot;name&quot;, &quot;Брошка в Виде Двух Птиц&quot;, &quot;description&quot;, &quot;Небольшая брошка голубого цвета, изображающая двух птичек.&quot;, &quot;class&quot;, &quot;twobirds&quot;))
(set: $printer_items to it + (a:$item))

}</tw-passagedata><tw-passagedata pid="9" name="Sidebar" tags="footer" position="590.5,91" size="100,100">Name: $name
Location: $location
Money: |money&gt;[$money]
(display: &quot;Inventory&quot;)
(display: &quot;Clues&quot;)</tw-passagedata><tw-passagedata pid="10" name="Clues" tags="" position="513.5,265" size="100,100">Clues: (link: &quot;Show&quot;)[
(if: $clues&#39;s length &gt; 0)[(for: each _item, ...$clues)[_item
  ]](else:)[ No clues yet]]</tw-passagedata><tw-passagedata pid="11" name="SideMenu" tags="" position="681.5,234" size="100,100">[]&lt;invlink|
[]&lt;invlist|
[]&lt;clueslink|
[]&lt;clueslist|

(replace: ?invlink)[(display: &quot;InvHidden&quot;)]
(replace: ?clueslink)[(display: &quot;CluesHidden&quot;)]</tw-passagedata><tw-passagedata pid="12" name="InvList" tags="" position="1029.5,48" size="100,100">(set: $invlist to (a: ...$inventory))\
(set: $invindex to 0)\
(if: $invlist.length &gt; 0)[
{
|invoutput&gt;[&lt;div class=&quot;sheet-col&quot;&gt;]&lt;/div&gt;\
(live: 1ms)[
(set: $invindex to it + 1)
(set: $invitem to $invlist&#39;s $invindex)
(append: ?invoutput)[**(text: $invitem&#39;s name)**&lt;br /&gt;(display: $invitem&#39;s descpass)&lt;br /&gt;&lt;br /&gt;]
(if: $invindex is $invlist.length)[(stop:)]]
}](else:)[Your inventory is empty.]</tw-passagedata><tw-passagedata pid="13" name="InvHidden" tags="" position="1139.5,43" size="100,100">Display Inventory{
(click: ?invlink)[
 (replace: ?invlink)[(display: &quot;InvDisplayed&quot;)]
 (replace: ?invlist)[(display: &quot;InvList&quot;)]
]}</tw-passagedata><tw-passagedata pid="14" name="InvDisplayed" tags="" position="1262.5,35" size="100,100">Hide Inventory{
(click: ?invlink)[
 (replace: ?invlink)[(display: &quot;InvHidden&quot;)]
 (replace: ?invlist)[]
]}</tw-passagedata><tw-passagedata pid="15" name="CluesList" tags="" position="1029.5,170" size="100,100">{
(set: $cluesnames to (a: ...$clues)
(set: $clueslist to (a: ...$cluesordered, ...$cluesnames))
(set: $clueindex to 0)}\
(if: $cluesnames.length &gt; 0)[
{
|cluesoutput&gt;[]\
(live: 1ms)[
(set: $clueindex to it + 1)
(set: $cluename to $clueslist&#39;s $clueindex)
(unless: $cluestoskip contains $cluename)[\
(append: ?clueoutput)[\
(if: $autocaps)[(css: &quot;text-transform:capitalize&quot;)[**$cluename**]]\
(else:)[**$cluename**]: \
(if: $arrayclues contains $cluename)[(print: (a: ...$player&#39;s $statname).join(&quot;, &quot;))](else:)[(print: $player&#39;s $statname)]&lt;br /&gt;]]
(if: $statindex is $statlist.length)[(stop:)]]
}](else:)[You have no stats.]</tw-passagedata><tw-passagedata pid="16" name="CluesHidden" tags="" position="1140.5,172" size="100,100">Display Clues{
(click: ?clueslink)[
 (replace: ?clueslink)[(display: &quot;CluesDisplayed&quot;)]
 (replace: ?clueslist)[(display: &quot;CluesList&quot;)]
]}</tw-passagedata><tw-passagedata pid="17" name="CluesDisplayes" tags="" position="1253.5,165" size="100,100">Hide Clues{
(click: ?clueslink)[
 (replace: ?clueslink)[(display: &quot;CluesHidden&quot;)]
 (replace: ?clueslist)[]
]}</tw-passagedata><tw-passagedata pid="18" name="Диалоговые опции 1 - Мина, Цую, Тенья" tags="" position="77.5,252" size="100,100">Здесь стоят твои будущие одноклассники, можешь с ними поговорить.
[[поговорить с Миной|Разговор с Миной]]

Смотри-ка, на земле что-то блестит! Может быть, это монетка?
{(set: $i to (random: 1,2))
&lt;!--(set: $i to 1) --&gt;
(link: &quot;Подобрать?&quot;)[(if: $i is 1)
[(set: $money to it + 1)(replace: ?money)[$money]Ты нашёл монетку!] (else:)[Это бутылочная крышка...]
]}</tw-passagedata><tw-passagedata pid="19" name="Dialog" tags="" position="689.5,362" size="100,100">{ 
    (link: (text: $dialog&#39;s 1st) )[
        (set: $dialog to (rotated: -1, ...$dialog))
		(set: $dialog_len to it - 1)
		(if: $dialog_len &gt; 0)[(replace: ?dialog)[(display: &quot;Dialog&quot;)]]
		(else:)
		[(replace: ?dialog)
		    [(if: $away&#39;s 1st is &quot;static&quot;)
		        [(print: $away&#39;s 2nd)]
			(else:) 
			  [(link-goto: $away&#39;s 1st, $away&#39;s 2nd)]				
			]
		]
    ]
}
</tw-passagedata><tw-passagedata pid="20" name="Untitled Passage" tags="" position="1144.5,355" size="100,100">(set: $dialogList to (dm: 
    &#39;mina1&#39;, (dm: 
        &#39;class&#39;, &#39;mina&#39;,
        &#39;text&#39;, (array: &#39;Привет! Я - Мина Ашидо, СУСШ Химикесса! Рада знакомству!&#39;, &#39;Д-да... да, я тоже очень рад!
Какая она... Жизнерадостная.&#39;, &#39;Ты такой хорошенький! А это что, ушки? Как мило!&#39;, &#39;А, да... спасибо!&#39;, &#39;Я надеюсь, мы с тобой поладим, ты мне уже нравишься!&#39;, &#39;Спасибо...&#39;, &#39;Что ты всё &quot;спасибо&quot; да &quot;спасибо&quot;, давай поживее!&#39;, &#39;Да! Хорошо! Я тоже надеюсь, что мы поладим!&#39;, &#39;Вот, так-то лучше!&#39;)
    ),
	&#39;npc2&#39;, (dm:
	&#39;class&#39;, &#39;npc2&#39;,
	&#39;text&#39;, (array: &#39;Реплика 1&#39;, &#39;Реплика 2&#39;)
))</tw-passagedata><tw-passagedata pid="21" name="No Money" tags="" position="231.5,388" size="100,100">{(set: _str to &quot;Тебе нужно где-то взять денег, чтобы запустить принтер.&quot;)(replace: ?gotitem)[_str]}</tw-passagedata><tw-passagedata pid="22" name="Do Printing" tags="" position="231.5,498" size="100,100">{(link-repeat: &quot;Бросить монетку?&quot;)
[(if: $money &gt; 0)
  [(set: $money to it - 1)
   (set: $i to (random: 1, $printer_items&#39;s length))
   (replace: ?money)[$money]
   (set: $item to $printer_items&#39;s ($i))
   (set: $inventory to it + (a: $item))
   (set: _str to &quot;Ты получил предмет: &quot; + $item&#39;s name)
   (replace: ?gotitem)[_str]
  ]
  (else:)[(display: &quot;No Money&quot;)]
]
}</tw-passagedata></tw-storydata>

<tw-storydata name="Monstermix Generator" startnode="1" creator="Twine" creator-version="2.2.1" ifid="78D2A1EB-8101-4A10-A08A-DD6DC9F2FE1E" zoom="1" format="Harlowe" format-version="2.1.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Main page" tags="" position="663.5,179" size="100,100">Select amount
{(link-repeat: &quot;1&quot;)[(set: $monsters to &quot;you chose 1 monster&quot;)(replace: ?monsternames)[(upperfirst: $monsters)] ]}
{(link-repeat: &quot;3&quot;)[(set: $monsters to &quot;You chose 3 monsters&quot;)(replace: ?monsternames)[$monsters] ]}
{(link-repeat: &quot;5&quot;)[(set: $monsters to &quot;You chose 5 monsters&quot;)(replace: ?monsternames)[$monsters] ]}
{(link-repeat: &quot;10&quot;)[(set: $monsters to &quot;You chose 10 monsters&quot;)(replace: ?monsternames)[$monsters] ]}
{(link-repeat: &quot;30&quot;)[(set: $monsters to &quot;You chose 30 monsters&quot;)(replace: ?monsternames)[$monsters] ]}

|monsternames&gt;[]</tw-passagedata><tw-passagedata pid="2" name="Init" tags="startup" position="794.5,179" size="100,100">{(set: $monsters to (array: &#39;witch&#39;, &#39;ghost&#39;, &#39;slime&#39;, &#39;werewolf&#39;, &#39;spider&#39;, &#39;worm&#39;,  &#39;zombie&#39;, &#39;cyclops&#39;, &#39;siren&#39;, &#39;dullahan&#39;, &#39;banshee&#39;, &#39;medusa&#39;, &#39;wendigo&#39;, &#39;bat&#39;, &#39;pumpkin&#39;, &#39;skeleton&#39;, &#39;nightmare&#39;, &#39;tentacles&#39;, &#39;mushroom&#39;, &#39;scarecrow&#39;, &#39;harpy&#39;, &#39;cockatrice&#39;, &#39;mothman&#39;, &#39;alien&#39;, &#39;lamia&#39;, &#39;doll&#39;, &#39;vampire&#39;,
&#39;demon&#39;, &#39;swamp&#39;, &#39;queen&#39;, &#39;kitsune&#39;))}</tw-passagedata></tw-storydata>

<tw-storydata name="Stats and Inventory Demo" startnode="14" creator="Twine" creator-version="2.2.1" ifid="2334B7F4-5619-434E-BEA9-F76E2AF2FA45" zoom="1" format="Harlowe" format-version="2.1.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">
</style><script role="script" id="twine-user-script" type="text/twine-javascript">


</script><tw-passagedata pid="1" name="The Beginning" tags="" position="762,489" size="100,100">*This passage includes the passages that set up the item list and the player&#39;s stats. You should PROBABLY do this in the first passage of your story.*

Welcome to a world of Super Intriguing Politics. Choose your character:

[[Viscount Fenico-&gt;Viscount Start]]

(display:&quot;ItemSetup&quot;)
(display:&quot;StatSetup&quot;)
(display:&quot;PlayerSetup&quot;)</tw-passagedata><tw-passagedata pid="2" name="StatsHidden" tags="" position="500,620" size="100,100">Display Stats{
(click: ?statlink)[
 (replace: ?statlink)[(display: &quot;StatsDisplayed&quot;)]
 (replace: ?statlist)[(display: &quot;StatList&quot;)]
]}</tw-passagedata><tw-passagedata pid="3" name="StatsDisplayed" tags="" position="500,750" size="100,100">Hide Stats{
(click: ?statlink)[
 (replace: ?statlink)[(display: &quot;StatsHidden&quot;)]
 (replace: ?statlist)[]
]}</tw-passagedata><tw-passagedata pid="4" name="StatMenu" tags="" position="1172,639" size="100,100">[]&lt;statlink|
[]&lt;statlist|
[]&lt;invlink|
[]&lt;invlist|
(replace: ?invlink)[(display: &quot;InvHidden&quot;)]
(replace: ?statlink)[(display: &quot;StatsHidden&quot;)]</tw-passagedata><tw-passagedata pid="5" name="StatList" tags="" position="500,490" size="100,100">{
(set: $statnames to (datanames: $player)-$statsordered)
(set: $statlist to (a: ...$statsordered, ...$statnames))
(set: $statindex to 0)}\
(if: $statnames.length &gt; 0)[
{
|statoutput&gt;[]\
(live: 1ms)[
(set: $statindex to it + 1)
(set: $statname to $statlist&#39;s $statindex)
(unless: $statstoskip contains $statname)[\
(append: ?statoutput)[\
(if: $autocaps)[(css: &quot;text-transform:capitalize&quot;)[**$statname**]]\
(else:)[**$statname**]: \
(if: $arraystats contains $statname)[(print: (a: ...$player&#39;s $statname).join(&quot;, &quot;))](else:)[(print: $player&#39;s $statname)]&lt;br /&gt;]]
(if: $statindex is $statlist.length)[(stop:)]]
}](else:)[You have no stats.]</tw-passagedata><tw-passagedata pid="6" name="Viscount Start" tags="" position="1172,509" size="100,100">*This passage runs code to set a bunch of the player&#39;s stats and add some items to their inventory. It also displays the &quot;StatMenu&quot; passage, which allows you to easily place the stat and inventory views on a page.*

\{
(set: $player&#39;s name to &quot;Andando Siur&quot;)
(set: $player&#39;s titles to (dataset: &quot;Viscount Fenico&quot;, &quot;Lord High Bowler&quot;))
(set: $player&#39;s age to 21)
(set: $player&#39;s health to 30)
(set: $player&#39;s wealth to 150)
(set: $player&#39;s standing to 50)
(set: $player&#39;s inv to it + (dataset: $TestItem1))
(set: $player&#39;s inv to it + (dataset: $TestItem2))
}\
\
You are now **Andando Siur**, Viscount Fenico and Lord High Bowler of the realm.

(display: &quot;StatMenu&quot;)
</tw-passagedata><tw-passagedata pid="7" name="_TestItem1" tags="" position="892,590" size="100,100">This item is a test item of type 1.</tw-passagedata><tw-passagedata pid="8" name="_TestItem2" tags="" position="1022,609" size="100,100">This item is a test item of type 2.</tw-passagedata><tw-passagedata pid="9" name="InvList" tags="" position="630,499" size="100,100">(set: $invlist to (a: ...$player&#39;s inv))\
(set: $invindex to 0)\
(if: $invlist.length &gt; 0)[
{
|invoutput&gt;[&lt;div class=&quot;sheet-col&quot;&gt;]&lt;/div&gt;\
(live: 1ms)[
(set: $invindex to it + 1)
(set: $invitem to $invlist&#39;s $invindex)
(append: ?invoutput)[**(text: $invitem&#39;s name)**&lt;br /&gt;(display: $invitem&#39;s descpass)&lt;br /&gt;&lt;br /&gt;]
(if: $invindex is $invlist.length)[(stop:)]]
}](else:)[Your inventory is empty.]</tw-passagedata><tw-passagedata pid="10" name="ItemSetup" tags="" position="762,599" size="100,100">(set: $TestItem1 to (datamap: 
&quot;name&quot;, &quot;Test Item 1&quot;,
&quot;descpass&quot;, &quot;_TestItem1&quot;,
))

(set: $TestItem2 to (datamap: 
&quot;name&quot;, &quot;Test Item 2&quot;,
&quot;descpass&quot;, &quot;_TestItem2&quot;,
))</tw-passagedata><tw-passagedata pid="11" name="InvHidden" tags="" position="618,600" size="100,100">Display Inventory{
(click: ?invlink)[
 (replace: ?invlink)[(display: &quot;InvDisplayed&quot;)]
 (replace: ?invlist)[(display: &quot;InvList&quot;)]
]}</tw-passagedata><tw-passagedata pid="12" name="InvDisplayed" tags="" position="617,703" size="100,100">Hide Inventory{
(click: ?invlink)[
 (replace: ?invlink)[(display: &quot;InvHidden&quot;)]
 (replace: ?invlist)[]
]}</tw-passagedata><tw-passagedata pid="13" name="StatSetup" tags="" position="783,831" size="100,100">{
&lt;!-- if autocaps is true, the stat list will automatically capitalize the first letter of each word in each stat name --&gt;
(set: $autocaps to true)

&lt;!-- stats named in this array will appear in the order given here before any other stats in the stat menu. All other non-skipped stats will be displayed after in alphabetical order. --&gt;
(set: $statsordered to (a:
&quot;name&quot;, 
&quot;titles&quot;,
))

&lt;!--stats listed here will be treated as sets and print each entry separated by &quot;, &quot; --&gt;
(set: $arraystats to (a:
&quot;titles&quot;,
))

&lt;!-- stats listed here are not displayed at all. If you use the included inventory display you should definitely keep &quot;inv&quot; in here --&gt;
(set: $statstoskip to (a:
&quot;inv&quot;,
))

}</tw-passagedata><tw-passagedata pid="14" name="READ ME" tags="" position="922,359" size="100,100">So here&#39;s everything you need to know about the system. Probably.

[[&gt;&gt; Nah, just jump into the demo.-&gt;The Beginning]]

{&lt;ul&gt;
**Summary**&lt;br /&gt;
&lt;li&gt; This demo will show you how to set up a player object with stats and an inventory.
&lt;li&gt; This demo also shows how to display the player stats and inventory in a way that adapts to any changes you make mostly automatically
&lt;br /&gt;&lt;br /&gt;
**Stats**&lt;br /&gt;
&lt;li&gt; Stats can be strings, numbers, datasets, or arrays. Any stats that are datasets or arrays need to be specified in the StatSetup passage.
&lt;li&gt; By default the *(print:&quot;$&quot;)player* object, which is the datamap of stat names to values, is defined in the PlayerSetup passage
&lt;li&gt; Settings for how to display stats in the included stat menu are defined in the Statsetup passage
&lt;br /&gt;&lt;br /&gt;
**StatSetup**&lt;br /&gt;
&lt;li&gt; The *(print:&quot;$&quot;)statsordered* object is an array of names of stats in the order you want them to appear
&lt;li&gt; The *(print:&quot;$&quot;)statstoskip* object is an array of names of stats you don&#39;t want printed at all. 
&lt;li&gt;Stats not in either list are printed alphabetically after the ordered stats.
&lt;li&gt; The *(print:&quot;$&quot;)arraystats* object needs to contain the names of any stats you want to print that contain multiple values so they can be displayed properly.
&lt;li&gt; If *(print:&quot;$&quot;)autocaps* is true, stat names will have the first leter of each word capitalized
&lt;br /&gt;&lt;br /&gt;
**Inventory**&lt;br /&gt;
&lt;li&gt; By default, the player inventory is an array called &quot;inv&quot; in the *(print:&quot;$&quot;)player* object
&lt;li&gt; The ItemSetup passage contains the definitions of all items
&lt;li&gt; The inventory is implemented as a dataset, so you cannot have more than one of the same item
&lt;br /&gt;&lt;br /&gt;
**Item Setup**&lt;br /&gt;
&lt;li&gt;Each item gets stored in a variable as a datamap for easy reference
&lt;li&gt; Each item&#39;s map contains a display name and the name of a passage that contains a description for that item
&lt;li&gt; For convenience, it is recommended you name the description passage for &quot;ItemName&quot; as &quot;_ItemName&quot;
&lt;/ul&gt;}

[[&gt;&gt; Alright, start the demo.-&gt;The Beginning]]</tw-passagedata><tw-passagedata pid="15" name="PlayerSetup" tags="" position="772,709" size="100,100">{(set: $player to (datamap:
&quot;name&quot;, &quot;No name&quot;,
&quot;titles&quot;, (a:),
&quot;age&quot;, 0,
&quot;health&quot;, 0, 
&quot;wealth&quot;, 0,
&quot;standing&quot;, 0,
&quot;inv&quot;, (dataset:),
))}</tw-passagedata></tw-storydata>

<tw-storydata name="Step on the road" startnode="1" creator="Twine" creator-version="2.2.1" ifid="C0C41CB9-E83C-44F6-A0F7-1FC96E109577" zoom="1" format="Harlowe" format-version="1.2.4" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">body
{
  background-color: #b0e0e6;
}
</style><script role="script" id="twine-user-script" type="text/twine-javascript">
</script><tw-passagedata pid="1" name="Начало" tags="" position="572,253" size="100,100">

Лето! Замечательное, жаркое, с проливными дождями, земляникой в траве и звенящими кузнечиками! Наконец-то настало лето!

Ты бежишь по улице — пушинки тополя набиваются в нос, хлопают сандалии, пружинят под ногами доски деревянного тротуара, воротник матроски сбился набок, но это ерунда. Большие деревья роняют густую тень, собака спит под стеной старой голубятни, дёргая ухом. Жужжат пчёлы, порхают бабочки-капустницы.

Ты взлетаешь по скрипучей деревянной лестнице, распахиваешь щелястую дверь, кричишь:

— Ребята!

И шагаешь в полутьму и прохладу.

[[И что там?|Retterberg01]]</tw-passagedata><tw-passagedata pid="2" name="Retterberg01" tags="" position="572,464" size="100,100">Ну и дела. Больше нет голубятни, нет жаркого летнего дня в маленьком уральском городе. Ты стоишь на площади, окружённой старинными домами, в точности как в сказках братьев Гримм. Площадь вымощена гладкими округлыми камешками, плотно пригнанными один к другому. За спиной звенит трамвай.

Тебя крепко берут за локоть. Это мужчина в чёрном костюме, почти лысый, очень толстый и какой-то масляный.

— А-а, юный путешественник. Идёмте, уже всё готово.

Через площадь торопится пожилая дама, похожая на старорежимную школьную учительницу или злую сказочную королеву. На голове шляпа с сеточкой, широкая юбка, в руке зонтик, на носу очки.

— Немедленно выпустите моего племянника! Пойдём, негодник! Тебе нужно заниматься!

От одного из ближних домов тебе машут рукой. Там компания ребят, два мальчика и девочка. Младший мальчик, лет шести, аж подпрыгивает.

[[Скажешь, что ты племянник старой дамы?|Retterberg02]]

[[Вывернешься из хватки толстяка и убежишь к ребятам?|Retterberg03]]

[[Попробуешь запрыгнуть в трамвай?|Retterberg04]]

[[Пойдёшь с толстяком?|Retterberg05]]</tw-passagedata><tw-passagedata pid="3" name="Retterberg02" tags="" position="346,614" size="100,100">— Простите, тётушка, я пошёл погулять и заблудился!
— Замечательно! Он заблудился! В следующий раз я эту карту нарисую у тебя на... коленке! — она подаёт тебе сложенный в восемь раз потрёпанный листок, на котором видны переплетения улиц, какие-то названия.
— Мадам Валентина! — возмущённо вопит толстяк. — Это ни в какие ворота не лезет!
— Вот именно, — откликается она хладнокровно. — Поэтому прекратите пыхтеть и займитесь своими делами.
— Идём, — кивает она тебе.

Толстяк гневно, размахивая руками, что-то вещает про торжественную встречу, но мадам Валентина его не слушает.

Вы идёте по узким улочкам города, ты вертишь головой по сторонам.
— Пришли, — её дом такой же узкий, как соседние, с острой крышей. На окне стоит цветочный горшок, в котором вместо цветка торчит ветвистый кристалл, похожий на кактус. На подоконнике дрыхнет рыжий кот.

— Молока с печеньем? — спрашивает мадам Валентина. — Или сразу дальше?

(link: &quot;Выпить молока&quot;)[Мадам Валентина ведёт тебя на кухню, такую тесную, что непонятно, как там уместились стол, старинная газовая плита и высокий трёхногий табурет.
Откуда она достала графин с молоком, ты не понял. Но молоко вкусное, ледяное, а печенье так и тает во рту.(set: $hunger to $hunger - 1)]

(link: &quot;Спросить, где ты оказался&quot;)[— Скажите, а... а где это я? Что это за город?
— Он называется Реттерберг.
Название кажется тебе знакомым. Или это был Реттерхельм? Реттерхайм?
— Раньше отсюда был прямой переход на вашу Грань. Но сейчас он закрыт. Тебе нужно попасть на Дорогу. Я провожу.]

Не мешкая, [[отправиться дальше|Retterberg06]]? 
</tw-passagedata><tw-passagedata pid="4" name="Retterberg03" tags="" position="497,614" size="100,100">Вы наскоро знакомитесь. Дама на площади ругается с толстяком, а тебя утаскивают в тень дома, вы ныряете в переулок, потом в неприметную дверь в каменной стене. За дверью сад — заросший, одичавший. Новые знакомые уверенно ведут тебя мимо заплетённых плющом кустов смородины, мимо яблонь, склонившихся чуть ли не до земли под весом яблок, мелких, зелёных и, скорее всего, червивых.
— Мадам Валентина хорошая, — говоит девочка, будто продолжая старый спор.
Старший мальчик, Рэм, дёргает плечом, загорелым и облезшим.
— В это время от неё на Меридиан не выйдешь, векторы не совпадают. А надо-то срочно. Пока миры не разошлись.
Ты мало что понимаешь в этом разговоре, и расспросить бы, но вы уже пришли. Перед тобой обычная калитка, деревянная, низенькая, покрашенная зелёной краской. Она не заперта, шпингалет болтается на одном гвозде. А за ней — просёлочная дорога, пыльная, почти белая, и цветущие луга, звенящие от кузнечиков и жужжащие от шмелей, раскинувшиеся вольготно до горизонта.
— Тебе туда.
Малыш, чьё имя ты успел забыть, вкладывает тебе в руку зелёное яблоко.

[[Выйти за калитку|Road01]]</tw-passagedata><tw-passagedata pid="5" name="Retterberg04" tags="" position="647,614" size="100,100">Трамвай покачивается на ходу, звенит и бренчит на поворотах. В нём нет стёкол, вагон продувает насквозь.

К тебе подходит кондуктор. — Билетик покупаем!

(link-reveal: &quot;- Извините, но у меня нет денег.&quot;)[
- Нет денег? Ничего страшного, потом отдашь. Вот, держи, - он подаёт тебе картонный билет с надписью &quot;Детский&quot;, фиолетовым штампом &quot;оплачено&quot; и выбитыми на нём словами &quot;ст.Мост - ст.Мост&quot;.]

(link-reveal: &quot;-А куда идёт трамвай?&quot;)[
- До станции Мост, куда же ещё. Устраивайся поудобнее, ехать далеко.]

[[Спрыгнешь на ходу?|Retterberg11]] Трамвай как раз сбавил скорость и с натугой лезет в горку.

Купить билет до станции Мост</tw-passagedata><tw-passagedata pid="6" name="Retterberg05" tags="" position="868,503" size="100,100">Толстяк приводит тебя в большое здание, на котором ты успеваешь прочитать крупную надпись &quot;Ратуша&quot; и табличку на стене &quot;Памятник архитектуры, охраняется государством&quot;. Ты входишь в большой зал. Толстяк подталкивает тебя, а сам остаётся за порогом.

Перед тобой длинный стол, накрытый белой тканью. За ним сидят люди в строгих костюмах. Они, как по команде, поднимаются и начинают аплодировать тебе. Ты видишь, что они улыбаются, но улыбки какие-то ненастоящие, да и лица ненастоящие, и руки — будто сделаны из папье-маше.

Тебе указывают на свободный стул.

Сядешь с ними [[за стол|Retterberg07]], потребуешь [[объяснений|Retterberg08]] или просто развернёшься и [[выскочишь за дверь|Retterberg09]]?</tw-passagedata><tw-passagedata pid="7" name="Retterberg06" tags="" position="359,763" size="100,100">— Думаю, мне нужно идти.
— Что ж, — говорит мадам Валентина, — доброй Дороги.
Слово &quot;Дороги&quot; звучит именно так, с большой буквы. Она делает несколько шагов по узкому коридору и распахивает низенькую дверь, которая могла бы вести в чулан, но за дверью — летний полдень, и от крыльца бежит тропинка через луг, а там виднеется просёлочная дорога, ведущая с запада на восток, судя по солнцу. Ты щуришься, пытаясь припомнить, с какой стороны было солнце, когда вы входили в дом. Не припоминается.
— Тебе туда. Шагай смело, не бойся.

[[Выйти в дверь|Road01]]</tw-passagedata><tw-passagedata pid="8" name="Road01" tags="" position="502,781" size="100,100">Странный город с брусчатыми улочками исчез, едва ты сделал шаг. Теперь и вперёд, и назад, сколько хватает взгляда, видна лишь дорога. Ты один на ней. Солнце стоит в зените. Если хочешь куда-то прийти до темноты — надо идти.

Значит, вперёд.</tw-passagedata><tw-passagedata pid="9" name="Retterberg07" tags="" position="825,359" size="100,100">Ты садишься с краешку на свободный стул. Он жёсткий и неудобный, ты крутишься, устраиваясь поудобнее. Сидящий рядом человек в костюме неодобрительно качает головой. Оказывается, тот, что сидит во главе стола, — председатель собрания, — встал и произносит речь.
Слова тебе вроде бы знакомы, но смысла не разобрать. Председатель что-то объясняет, у него за спиной доска с диаграммами, он порой оборачивается и чертит на ней мелом какие-то графики. Остальные люди за столом кивают, на лицах полное одобрение. Тебе скучно, но вертеться на стуле нельзя, надо бы встать и попроситься выйти, но голова тяжёлая, ноги гудят от усталости. Наверное, ничего страшного, если немного отдохнуть? Можно лечь головой на стол, всё равно на тебя никто не смотрит, все поглощены речью.
Ты засыпаешь. Сквозь сон слышны трескучие аплодисменты.
Проснёшься ли ты? Когда это будет? И кем ты проснёшься? Кто знает...

**The End**

[[Сыграть ещё раз?|Начало]]</tw-passagedata><tw-passagedata pid="10" name="Retterberg08" tags="" position="793,651" size="100,100">Ты набираешься смелости и спрашиваешь у человека, сидящего ближе всех, что здесь происходит. Он прижимает палец к губам:
— Тс-с, — и указывает на дальний конец стола, где один из незнакомцев в костюмах поднялся и произносит речь.
Слова тебе вроде бы знакомы, но смысла не разобрать. Председатель что-то объясняет, у него за спиной доска с диаграммами, он порой оборачивается и чертит на ней мелом какие-то графики. Остальные люди за столом кивают, на лицах полное одобрение. Тебе кажется, что вот-вот ты тоже поймёшь, о чём он говорит. Поймёшь, как отсюда выбраться.
Ты вглядываешься в меловые линии на доске до рези в глазах, потом лезешь за платком в нагрудный карман пиджака, и пальцы плохо гнутся, как будто они глиняные, кажется, что они сейчас потрескаются и с них посыплется глазурь.
Надо бы осторожнее. Особенно когда придёт время аплодировать.
&lt;img src=&quot;http://static3.depositphotos.com/1003874/166/i/950/depositphotos_1661524-stock-photo-men-dummies-in-suits.jpg&quot; width=&quot;300&quot; alt=&quot;Манекены&quot;&gt;


**The End**

[[Сыграть ещё раз?|Начало]]</tw-passagedata><tw-passagedata pid="11" name="Retterberg09" tags="" position="1073,560" size="100,100">Там, где была дверь, теперь сплошная стена, покрытая сероватой неровной штукатуркой. Единственный выход из комнаты - ряд высоких окон вдоль дальней стены. За окнами горит закат. Но ведь недавно было утро! Неужели ты пробыл тут несколько часов?

Вернёшься [[за стол|Retterberg07]]?
Выпрыгнешь [[в окно|Retterberg10]]?
(link: &quot;Попробуешь толкнуть стену как можно сильнее, вдруг дверь появится?&quot; )[Ты изо всех сил ударяешься в стену, сдирая кожу на ладонях. Не помогло. Двери по-прежнему нет. Манекены выбираются из-за стола и движутся к тебе.
(link: &quot;Попробуешь ещё раз?&quot;)[Ты снова что есть сил ударяешься об стену. Кажется, она немного поддалась, по штукатурке пошли трещины. Манекены всё ближе... 
(link: &quot;Ещё раз?&quot;)[С третьим ударом штукатурка рассыпается, за ней обшарпанная деревянная дверь, совсем не подходящая к помпезному залу и не похожая на ту, через какую ты пришёл. Но раздумывать особо некогда, или [[туда|Retterberg12]], или [[остаться здесь с манекенами|Retterberg13]] - а они смыкают кольцо и выглядят очень недобро.]]
]</tw-passagedata><tw-passagedata pid="12" name="Retterberg11" tags="" position="647,764" size="100,100">Ты выскакиваешь на площадку и спрыгиваешь в густую траву. Трамвай дребезжит дальше, ты оглядываешься и пытаешься понять, куда попал.</tw-passagedata><tw-passagedata pid="13" name="Retterberg10" tags="" position="1057,834" size="100,100">Прыжок, полёт, земля больно бьёт в пятки и ты скатываешься кубарем по крутому песчаному склону, хватаясь за стебли бурьяна.
И приходишь в себя на берегу реки. Склон уходит вверх, песок набился повсюду, ратуши наверху не видно. Закат горит над рекой, на том берегу темнеет лес. Справа, выше по течению, слышен гудок - то ли пароход вдалеке, то ли поезд.

Попробовать выйти к пристани
Поискать мост
Переплыть реку
Взобраться вверх по склону
Подождать утра</tw-passagedata><tw-passagedata pid="14" name="Retterberg12" tags="" position="923,767" size="100,100">Ты выскакиваешь в дверь и захлопываешь её за собой. А потом, чуть отдышавшись, пытаешься понять, где оказался. Это комнатка с кирпичными стенами, на обшарпанном столе горит свеча, рядом - кружка воды и кусок чёрного хлеба. У стены лежит видавший виды полосатый матрас, рядом с ним - какая-то книга.
- Пр-ривет! - слышишь ты. На проволоке, протянутой через комнату,  подвешена самодельная игрушка - тряпочный узелок с нарисованными глазами и ртом. И сейчас он заговорил с тобой.</tw-passagedata><tw-passagedata pid="15" name="Retterberg13" tags="" position="1007,294" size="100,100">Ты даже не понимаешь, что произошло. Просто закружилась голова, стало очень темно, на миг перед тобой вспыхнули звёзды, тысячи звёзд, и всё исчезло...

**The End**

[[Сыграть ещё раз?|Начало]]</tw-passagedata></tw-storydata>

